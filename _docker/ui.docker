FROM node:20.13-alpine

RUN apk update && apk add bash

# (hoặc nếu cần nâng npm → chỉ nâng tới 10.5.2)
# RUN apk update && apk add bash && npm install -g npm@10.5.2

RUN npm install -g @angular/cli

WORKDIR /app
COPY package*.json ./
RUN npm install --legacy-peer-deps

COPY . .

EXPOSE 4200
CMD ["ng", "serve", "--host", "0.0.0.0", "--port", "4200"]
