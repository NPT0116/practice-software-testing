FROM node:20.13-alpine

RUN apk update && apk add bash
RUN npm install -g @angular/cli

WORKDIR /app

# Copy package.json và package-lock.json từ source Angular
COPY angular-ui/package*.json ./

# Cài dependencies
RUN npm install --legacy-peer-deps

# Copy toàn bộ mã nguồn Angular vào container
COPY angular-ui/ ./

EXPOSE 4200

# Run Angular dev server
CMD ["ng", "serve", "--host", "0.0.0.0", "--port", "4200"]
